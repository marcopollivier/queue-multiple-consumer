project.name: queue-multiple-consumer

server.port: 8090
management.port: 8091

logging.path: /app/cypher/log

spring:
  application:
    name: queue-multiple-consumer
  rabbitmq:
    addresses: localhost
    virtual_host: xmen

  cloud.stream:
    bindings:

      #Fila aplicação externa
      FilaUnicaOutput:
        destination: ${project.name}.FilaUnica

      #Consumidores da mesma fila
      FilaUnicaInputCypher:
        destination: ${project.name}.FilaUnica
        consumer:
          maxAttempts: 5
      FilaUnicaInputJuggernaut:
        destination: ${project.name}.FilaUnica
        consumer:
          maxAttempts: 5

    rabbit.bindings:
      FilaUnicaInputCypher:
        consumer:
          autoBindDlq: true
          republishToDlq: true
          requestHeaderPatterns:
            tenant: "cypher"

      FilaUnicaInputJuggernaut:
        consumer:
          autoBindDlq: true
          republishToDlq: true
          requestHeaderPatterns:
            tenant: "juggernaut"


